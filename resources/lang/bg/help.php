<?php

return [
    'title' => 'Помощ & Уики',
    'intro_html' => '<strong>Добре дошли в Resource Legends.</strong> Тази страница съдържа основна информация за играта, механики и съвети за сигурност. Използвайте линковете по-долу, за да отидете директно на секция.',
    'contents_title' => 'Съдържание',
    'toc' => [
        'getting_started' => 'Първи стъпки',
        'game_basics' => 'Основи на играта',
        'resources' => 'Ресурси',
        'lottery' => 'Лотария',
        'parcels' => 'Парцели',
        'construction' => 'Строителство и обекти',
        'economy' => 'Икономика и търговия',
        'accounts_security' => 'Акаунти и сигурност',
    ],
    'sections' => [
        'getting_started' => [
            'title' => 'Първи стъпки',
            'body' => '<p>Регистрирай нов акаунт или влез с личния си частен ключ. След влизане ще видиш картата и основните контроли за взаимодействие с парцелите и обектите.</p>'
                . '<ul>'
                . '<li><strong>Регистрация:</strong> Създай потребителско име в таба Регистрация. Системата ще предостави частен ключ или механизъм за автентикация — запази този ключ на сигурно място.</li>'
                . '<li><strong>Вход:</strong> Използвай частния ключ в таба Вход, за да влезеш в акаунта си. Можеш да избереш да запомниш устройството.</li>'
                . '<li><strong>Преглед на интерфейса:</strong> Горната навигация съдържа бързи връзки (Начало, Карта, Инвентар, Известия, Настройки). Балансът се вижда във футъра.</li>'
                . '<li><strong>Първи стъпки:</strong> Заяви наличен парцел на картата, постави базов обект и събери начални ресурси.</li>'
                . '<li><strong>Език и настройки:</strong> Смени езика от флаговете на началната страница или в Настройки.</li>'
                . '<li><strong>Поддръжка и обновления:</strong> Проверявай Известия за системни съобщения и ъпдейти.</li>'
                . '</ul>'
        ],
        'game_basics' => [
            'title' => 'Основи на играта',
            'body' => '<p>Светът е организиран като парцели на мрежа. Всеки парцел може да бъде притежаван, развиван и използван за събиране на ресурси или поставяне на обекти.</p>'
                . '<ul>'
                . '<li><strong>Действия и таймери:</strong> Много действия имат cooldown или време за завършване. Виж описанията на обектите/инструментите за конкретни времена.</li>'
                . '<li><strong>Асинхронна игра:</strong> Играта работи на сървърни тикове; действията могат да завършват докато си офлайн. Всички времена се съхраняват в UTC за консистентност между часови зони.</li>'
                . '<li><strong>Собственост:</strong> Парцелите показват собственик и са защитени — за поставяне на обекти трябва да притежаваш парцела.</li>'
                . '<li><strong>Валидация на бекенда:</strong> Всички критични проверки са направени на сървъра — не се доверявай на клиентски данни.</li>'
                . '</ul>'
        ],
        'resources' => [
            'title' => 'Ресурси',
            'body' => '<p>Ресурсите са основната валута за строеж и напредък. Събирай ресурси чрез взаимодействие с парцелите или обектите на тях. Различните обекти произвеждат различни ресурси.</p>'
                . '<ul>'
                . '<li><strong>Общи типове ресурси:</strong> дърво, камък, храна (имената могат да варират според типовете обекти).</li>'
                . '<li><strong>Производство:</strong> Обектите генерират ресурси с течение на времето; скоростта зависи от нивото и ъпгрейдите.</li>'
                . '<li><strong>Капацитет:</strong> Сгради за съхранение или парцелни ъпгрейди могат да ограничават количеството ресурси, които държиш.</li>'
                . '<li><strong>Събиране:</strong> Използвай UI на парцела или картата, за да събереш генерираните ресурси. Някои ресурси изискват интеракция с даден обект.</li>'
                . '</ul>'
        ],
        'parcels' => [
            'title' => 'Парцели',
            'body' => '<p>Парцелите представляват клетки на картата и са основната област за взаимодействие.</p>'
                . '<ul>'
                . '<li><strong>Заявяване:</strong> Заяви налични парцели показани на картата. Заявеният парцел става твой за развитие.</li>'
                . '<li><strong>Уникални координати:</strong> Всеки парцел има уникални x,y координати; два играча не могат да притежават едни и същи координати.</li>'
                . '<li><strong>Съседство и стратегия:</strong> Парцели съседни до твоите могат да дават стратегически предимства (разширение, бонуси при свързаност).</li>'
                . '<li><strong>Ъпгрейди на парцели:</strong> Ъпгрейдвай парцели, за да увеличиш слотовете за строеж, бонусите за ресурси или да отключиш функционалности.</li>'
                . '<li><strong>Редактор на парцели:</strong> Отвори парцела, за да поставиш/премахнеш обекти и да назначиш работници.</li>'
                . '</ul>'
        ],
        'construction' => [
            'title' => 'Строителство и обекти',
            'body' => '<p>Обекти като къщи, ферми или работилници могат да бъдат поставяни върху притежавани парцели. Използвай редактора на парцели (кликни парцел на картата), за да поставяш, ъпдейтваш или премахваш обекти.</p>'
                . '<ul>'
                . '<li><strong>Бройки строежи на парцел:</strong> Всеки парцел има ограничен брой слотове за строеж (например 1-4 в зависимост от размера и ъпгрейдите). Можеш да поставиш само толкова обекти, колкото са наличните слотове.</li>'
                . '<li><strong>Избор на работници:</strong> За да започнеш строеж, трябва да назначиш налични работници. Всеки работник допринася за скоростта на строежа. Назначаването на повече или по-високо ниво работници намалява общото време.</li>'
                . '<li><strong>Изчисление на времето за строеж:</strong> Базовото време зависи от типа обект и нивото му. Реалното време = base_time / (1 + worker_effect + building_level_bonus). Worker_effect е сумата от ефективностите на работниците; building_level_bonus идва от съществуващи ъпгрейди.</li>'
                . '<li><strong>Ъпгрейд на обекти:</strong> Обектите могат да се ъпгрейдват за да увеличат добива или ефективността. Ъпгрейдът изисква ресурси и работници и следва същите правила за изчисление на времето.</li>'
                . '<li><strong>Ред:</strong> Можеш да поставяш няколко строежа в опашка за парцела, ако слотовете позволяват. В текущата реализация анулирането на активни строежи не е поддържано.</li>'
                . '<li><strong>Нива и обучение на работници:</strong> Работниците имат нива/умения. По-високо ниво означава по-голяма ефективност. Обучавай работници в специални сгради (например академия), за да подобриш показателите им.</li>'
                . '<li><strong>Разходи за ресурси:</strong> В момента строежите и ъпгрейдите не консумират ресурсни валути в текущата имплементация — те разчитат на назначаване на работници и изчакване на времето за строеж. Ако в бъдеще се добавят ресурсоемки разходи, помощната страница ще бъде обновена.</li>'
                . '<li><strong>Пример:</strong> Строеж на Къща ниво 1 с базово време 60 минути. Назначаване на двама работници с общ ефект 0.5 дава: 60 / (1 + 0.5) = 40 минути. Ъпгрейд до ниво 2 може да удвои базовото време, но да увеличи продукцията.</li>'
                . '<li><strong>Точна формула:</strong> Имплементацията използва сървърна функция <code>calculateBuildSeconds(baseSeconds, currentLevel, workerLevel, workerCount)</code>. Вътрешно: nextLevel = max(1, currentLevel+1); seconds = max(60, baseSeconds * nextLevel - ((workerLevel * workerCount) - 1)*60).</li>'
                . '<li><strong>Показване на време за строеж:</strong> Времето за строежи и ъпгрейди вече се показва с удобни за четене единици (минути, часове или дни) в редактора на парцели и диалозите за ъпгрейд.</li>'
                . '<li><strong>Пример с заети работници:</strong> Имаш 5 работници ниво 1. Стартираш строеж като назначиш 2 работника ниво 1: създава се запис в occupied_workers и тези 2 работника не са достъпни до приключване. Ако стартираш още един строеж с 2 работника ниво 1, ще ти остане 1 свободен работник ниво 1.</li>'
                . '</ul>'
        ],
        'lottery' => [
            'title' => 'Лотария (Незабавна обща)',
            'body' => '<p>Лотарията работи незабавно за всеки играч: при натискане на "Играй" залогът ти се добавя към общ джакпот и сървърът извършва теглене само за твоя entry.</p>'
                . '<ul>'
                . '<li><strong>Общ джакпот:</strong> Всички залози се натрупват в общ фонд на сървъра. Изплатените награди се приспадат веднага от този фонд.</li>'
                . '<li><strong>Изплащания:</strong> Изплащанията са проценти от текущия джакпот в момента на твоя залог: 6 съвпадения = 100% (цяло джакпота), 5 = 20%, 4 = 4%, 3 = 1% (минимум 1).</li>'
                . '<li><strong>Атомарност:</strong> Залогът, тегленето и изплащането се обработват в транзакция, така че двама играчи не могат да получат едни и същи пари два пъти.</li>'
                . '<li><strong>Предупреждение:</strong> Ако джакпотът е намалял от последното ти виждане, клиентът ще ти покаже предупреждение и няма да изпрати залога, за да можеш да играеш с обновения джакпот.</li>'
                . '<li><strong>Анимация и UX:</strong> Клиентът показва анимация за suspense, но резултатът вече е записан на сървъра при натискане на Play.</li>'
                . '</ul>'
        ],
    'population' => [
    'title' => 'Население, Болници и Производства',
    'body' => '<p>Този раздел описва динамиката на населението, болниците и как сървърът обработва заетите работници и анулираните производства.</p>'
    . '<ul>'
    . '<li><strong>Раждания:</strong> Всеки ден сървърът изпълнява тик за населението. Нови хора се добавят според вашите <em>къщи</em> и туловете прикрепени към тях. Формулата сумира нивата на къщите и нивата на туловете и добавя толкова хора (ниво 1).</li>'
    . '<li><strong>Болници и смъртност:</strong> Болниците (object_type "hospital") и туловете в тях дават медицинска капацитет. След ражданията сървърът проверява капацитета на болниците срещу текущото население. Ако капацитетът е по-нисък, излишните хора се премахват (умират) частично. Премахването се прилага от най-високите нива надолу (първо старите хора). Ако група хора стигне 0, редът се изтрива от базата.</li>'
    . '<li><strong>Какво се случва при липса на болници:</strong> Ако нямате никакъв болничен капацитет, сървърът все пак ще премахне част от населението поради липса на капацитет, но смъртността е ограничена — в един тик не се премахват повече от 80% от общото население, така че няма да загубите цялото си население наведнъж.</li>'
        . '<li><strong>Синхронизация на заети работници:</strong> Ако броят на заетите работници на дадено ниво надвишава наличните хора на това ниво, всички засегнати записи за това ниво се анулират. В този случай сървърът:</li>'
        . '<ul>'
        . '<li>Изтрива съответните записи в <code>occupied_workers</code> (работниците се освобождават).</li>'
        . '<li>Задава <code>ready_at</code> на свързаните обекти на <code>null</code> (строеж/производство е спрян и може да се стартира отново).</li>'
        . '<li>Изтрива per-object <code>production_outputs</code> (произведеното се губи) и намалява <code>inventory.temp_count</code> с очакваните продукти.</li>'
        . '<li>Входните ресурси, консумирани при старта, НЕ се връщат (стартирането на производство изразходва входните ресурси веднага).</li>'
        . '</ul>'
        . '<li><strong>Защо така:</strong> Това предотвратява наличието на активни производства, които използват несъществуващи хора и поддържа състоянието на сървъра консистентно. Също така играчите са мотивирани да строят болници и да управляват внимателно назначаването на работници.</li>'
        . '</ul>'
    ],
        'economy' => [
            'title' => 'Икономика и търговия',
            'body' => '<p>Икономиката в играта се базира на генериране, харчене и (при нужда) търговия с ресурси.</p>'
                . '<ul>'
                . '<li><strong>Баланс:</strong> Текущият ти баланс е във футъра. Използвай го за ъпгрейди, обекти или други механики.</li>'
                . '<li><strong>Търговия:</strong> Ако търговските механики са активирани, използвай ги за размяна на ресурси с други играчи или пазари.</li>'
                . '<li><strong>Разходи и ROI:</strong> Помисли за възвръщаемостта при строеж — продукция спрямо цена и време за строеж.</li>'
                . '<li><strong>Пазар:</strong> Новата страница „Пазар“ (Market) ти позволява да поставяш лимитирани поръчки за купуване и продаване на инструменти и продукти. Поръчките се съпоставят периодично (на всеки 10 минути) за по-справедливо съпоставяне и по-малко натоварване на сървъра. Когато поставиш поръчка, необходимите средства или артикули се резервират; резервът се освобождава при анулиране или се консумира при изпълнение на сделка. Цените са цели числа, а таксите са малки — виж UI на Пазара за текущите тарифи и твоите резервирани средства/стоки.</li>'
                . '</ul>'

                . '<p><strong>Бележки за интерфейса на пазара:</strong> Таблицата с поръчките има специална колона "Действия" (икона кошче) за анулиране. Използвай малката икона за анулиране, за да премахнеш отворени поръчки. Чекбоксът "Скрии отказаните" се запазва в браузъра ти и предпочитанието остава между посещения.</p>'
        ],
        'accounts_security' => [
            'title' => 'Акаунти и сигурност',
            'body' => '<p>Сигурността на акаунта е критична. Системата използва частни ключове и токени за автентикация.</p>'
                . '<ul>'
                . '<li><strong>Частен ключ:</strong> Частният ключ служи за вход. Не го споделяй. Съхранявай го в мениджър на пароли или офлайн.</li>'
                . '<li><strong>Лични токени:</strong> Приложението поддържа токени за API достъп. Управлявай и отнемай токени в Настройки (Personal Access Tokens).</li>'
                . '<li><strong>Запомни устройството:</strong> Използвай опцията само на доверени устройства.</li>'
                . '<li><strong>Загуба на достъп:</strong> Ако загубиш частния ключ, възстановяването може да е невъзможно — пази резервни копия.</li>'
                . '<li><strong>Добри практики:</strong> Използвай защитени устройства, поддържай софтуера обновен и не споделяй данни за достъп.</li>'
                . '</ul>'
        ],
    ],
];
